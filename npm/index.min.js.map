{"version":3,"file":"index.min.js","sources":["../src/utils.js","../src/diff.js","../src/index.js"],"sourcesContent":["export const sto = setTimeout;\n\nexport const isFunc = (val) => typeof val === 'function';\n\nexport function filteredArray(arr1, arr2) {\n  const newArr = Object.assign([], arr1);\n  let i = 0;\n  const len = arr2.length;\n  while (i < len) {\n    const idx = newArr.indexOf(arr2[i]);\n    if (idx >= 0) newArr.splice(idx, 1);\n    i++;\n  }\n  return newArr;\n}\n\nexport function escHTML(unsafe) {\n  return String(unsafe)\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\nfunction styleToString(style) {\n  return Object.keys(style).reduce(\n    (acc, key) =>\n      acc +\n      key\n        .split(/(?=[A-Z])/)\n        .join('-')\n        .toLowerCase() +\n      ':' +\n      style[key] +\n      ';',\n    ''\n  );\n}\n\nexport function removeAttributes(fn, rep) {\n  return (typeof fn === 'string' ? fn : fn()).replace(/ c-.*=\"\\d+\"/g, (a) => {\n    const arr = (a || '').split(' ');\n    let str = '';\n    for (let i = 0; i < arr.length; i++) {\n      const ret = rep[arr[i]];\n      if (ret) {\n        const { key, value } = ret;\n        const type = typeof value;\n        if (type === 'object' && key !== 'ref') {\n          str += ` ${key}=\"${styleToString(value)}\"`;\n        }\n        if (value === true) str += ` ${key}`;\n      }\n    }\n    return str;\n  });\n}\n\nexport function hasChange(old, next) {\n  return (\n    !old || old.length !== next.length || next.some((dep, x) => dep !== old[x])\n  );\n}\n\nfunction runCleanup(effect) {\n  if (isFunc(effect.clean)) effect.clean();\n}\n\nexport function invoveEffect(effect, i) {\n  if (typeof i !== 'boolean') {\n    runCleanup(effect);\n    effect.clean = undefined;\n  }\n  if (isFunc(effect.val)) {\n    sto(() => (effect.clean = effect.val()));\n  }\n}\n\nexport function cleanEffect(c) {\n  if (c.hook) sto(() => c.hook.s.forEach(runCleanup));\n}\n\nexport function runEffectFromStates(arr, status) {\n  if (arr.length) {\n    const effects = arr.filter((el) => el.status === true);\n    const layoutEffects = arr.filter((el) => el.status === false);\n    if (effects.length)\n      sto(() => effects.forEach((effect) => invoveEffect(effect, status)));\n    if (layoutEffects.length)\n      layoutEffects.forEach((effect) => invoveEffect(effect, status));\n  }\n}\n","// CREDIT & ORIGINAL: https://gomakethings.com/dom-diffing-with-vanilla-js\n// Add diff attribute\nconst isVanicAttr = (a) => a[0] === 'c' && a[1] === '-';\nfunction isNotMatch(node, dom) {\n  return (\n    node.nodeType !== dom.nodeType ||\n    node.tagName !== dom.tagName ||\n    node.id !== dom.id ||\n    node.src !== dom.src ||\n    getAttr(node, 'c-comp') !== getAttr(dom, 'c-comp')\n  );\n}\nfunction getAttr(node, attr) {\n  if (!node.getAttribute) return '';\n  return node.getAttribute(attr);\n}\nfunction getNodeContent(node, attr) {\n  if (attr) {\n    if (attr === 'href' || isVanicAttr(attr)) return getAttr(node, attr);\n    if (typeof node[attr] !== 'string') return getAttr(node, attr);\n    return node[attr];\n  }\n  if (node.childNodes && node.childNodes.length > 0) return null;\n  return node.textContent;\n}\nexport function diff(template, elem) {\n  const domNodes = Array.prototype.slice.call(elem.childNodes);\n  const templateNodes = Array.prototype.slice.call(template.childNodes);\n  let count = domNodes.length - templateNodes.length;\n  if (count > 0) {\n    for (; count > 0; count--) {\n      domNodes[domNodes.length - count].parentNode.removeChild(\n        domNodes[domNodes.length - count]\n      );\n    }\n  }\n  templateNodes.forEach(function (node, index) {\n    if (!domNodes[index]) {\n      const newNode = node.cloneNode(true);\n      elem.appendChild(newNode);\n      return;\n    }\n    if (node.attributes && node.attributes.length) {\n      let i = 0;\n      const len = node.attributes.length;\n      while (i < len) {\n        const attr = node.attributes[i];\n        if (attr.name) {\n          const tpl = getNodeContent(node, attr.name) || '';\n          const tplDom = getNodeContent(domNodes[index], attr.name) || '';\n          if (tpl !== tplDom) {\n            let nm = attr.name;\n            if (isVanicAttr(nm)) {\n              if (nm !== 'c-comp') {\n                if (domNodes[index].setAttribute) {\n                  domNodes[index].setAttribute(nm, tpl);\n                }\n              }\n            } else {\n              if (nm === 'class') nm = 'className';\n              else if (nm === 'for') nm = 'htmlFor';\n              domNodes[index][nm] = tpl;\n            }\n          }\n        }\n        i++;\n      }\n    }\n    if (isNotMatch(node, domNodes[index])) {\n      domNodes[index].parentNode.replaceChild(\n        node.cloneNode(true),\n        domNodes[index]\n      );\n      return;\n    }\n    const templateContent = getNodeContent(node);\n    if (\n      templateContent &&\n      templateContent !== getNodeContent(domNodes[index])\n    ) {\n      domNodes[index].textContent = templateContent;\n    }\n    if (domNodes[index].childNodes.length > 0 && node.childNodes.length < 1) {\n      domNodes[index].innerHTML = '';\n      return;\n    }\n    if (domNodes[index].childNodes.length < 1 && node.childNodes.length > 0) {\n      const fragment = document.createDocumentFragment();\n      diff(node, fragment);\n      domNodes[index].appendChild(fragment);\n      return;\n    }\n    if (node.childNodes.length > 0) {\n      diff(node, domNodes[index]);\n    }\n  });\n}\n","import {\n  filteredArray,\n  hasChange,\n  removeAttributes,\n  escHTML,\n  sto,\n  cleanEffect,\n  invoveEffect,\n  runEffectFromStates,\n  isFunc,\n} from './utils.js';\nimport { diff } from './diff.js';\n\nlet reRender;\nlet reElem;\nlet fno = [];\nlet rep = {};\nlet idx = 0;\nlet hid = 0;\nlet curComp;\nlet primIndex = 0;\nlet lastRes;\nconst primObject = {};\nconst dangerHTML = 'dangerouslySetInnerHTML';\n\nfunction _render(fn) {\n  const res = fn();\n  const elem = document.createElement('div');\n  elem.innerHTML = res;\n  diff(elem, reElem);\n  let i = fno.length;\n  while (i--) {\n    const obj = fno[i];\n    const value = obj.value;\n    const key = obj.key.toLowerCase();\n    if (key !== 'ref') {\n      const $ = reElem.querySelector(`[c-${key}=\"${i}\"]`);\n      if ($) {\n        if (typeof value === 'object') {\n          for (const s in value) $[key][s] = value[s];\n        } else {\n          $[key] = value;\n        }\n      }\n    }\n  }\n  idx = 0;\n  fno = [];\n  const check = reElem.querySelectorAll('[c-comp]');\n  if (reRender && check.length !== primIndex) {\n    const arr = Array.prototype.map.call(\n      check,\n      (el) => el.getAttribute && el.getAttribute('c-comp')\n    );\n    const initArr = lastRes.match(/(?<=c-comp=\")(.*?)(?=\")/gm) || [];\n    filteredArray(initArr, arr).forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) cleanEffect(cmp);\n    });\n    filteredArray(arr, initArr).forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) {\n        const { hook } = cmp;\n        hook.y.splice(0);\n        hook.e.splice(0);\n        runEffectFromStates(hook.s, true);\n      }\n    });\n    primIndex = arr.length;\n  }\n  lastRes = res;\n  reRender = fn;\n}\n\nexport function html(ret) {\n  const subs = [].slice.call(arguments, 1);\n  return ret.reduce((start, end, no) => {\n    let val = subs[no - 1];\n    if (val === null || val === undefined) val = '';\n    if (Array.isArray(val)) val = val.join('');\n    const type = typeof val;\n    if (type === 'function' || type === 'boolean' || type === 'object') {\n      const arr = start.match(/[^ ]+/g);\n      const value = val;\n      const key = (arr[arr.length - 1] || '').replace(/=|\"/g, '').toLowerCase();\n      if (!/<|>/.test(key)) {\n        const id = idx++;\n        const attr = `c-${key}=\"${id}`;\n        if (key === 'ref') {\n          val.ref = () => document.querySelector(`[${attr}\"]`);\n        }\n        fno[id] = { key, value };\n        if (type !== 'function') rep[`${attr}\"`] = { key, value };\n        start = arr.slice(0, -1).join(' ') + ` ${attr}`;\n      }\n      val = '';\n    }\n    return start + String(val) + end;\n  });\n}\n\nexport function renderToString(fn) {\n  return removeAttributes(fn, rep);\n}\n\nexport function render(fn, elem) {\n  reRender = undefined;\n  lastRes = undefined;\n  fno = [];\n  rep = {};\n  idx = 0;\n  reElem = elem;\n  _render(fn);\n}\nexport const comp = (fn) => {\n  const hook = (__C.hook = { i: 0, e: [], y: [], s: [] });\n  const id = hid++;\n  function __C(p) {\n    const prev = curComp;\n    curComp = __C;\n    hook.i = 0;\n    let res = fn(p === undefined ? {} : p);\n    if (typeof res === 'string') {\n      if (!/<.*>/.test(res)) res = `<notag>${res}</notag>`;\n      res = res.replace(/>/, ` c-comp=\"${id}\">`);\n      primObject[`${id}`] = curComp;\n      if (!reRender) primIndex++;\n    }\n    if (prev) curComp = prev;\n    if (reRender) {\n      if (hook.e.length) sto(() => hook.e.splice(0).forEach(invoveEffect));\n      if (hook.y.length) hook.y.splice(0).forEach(invoveEffect);\n    } else runEffectFromStates(hook.s);\n    return res;\n  }\n  return __C;\n};\n\nconst buildEffect = (status) => (val, deps) => {\n  if (!reElem) return;\n  const { i, s, e, y } = curComp.hook;\n  if (!deps) deps = s.map((el) => el.state).filter(Boolean);\n  const isOk = i >= s.length;\n  if (isOk) s[i] = { deps, val, status };\n  if (reRender && (isOk || hasChange(s[i].deps, deps))) {\n    (status ? e : y).push(s[i]);\n  }\n  s[i].val = val;\n  s[i].deps = deps;\n  s[i].status = status;\n  curComp.hook.i++;\n};\n\n// useState\nexport function useState(value) {\n  const { s, i } = curComp.hook;\n  const state = s[i] === undefined ? value : s[i].state;\n  if (i >= s.length) s.push({ state });\n  curComp.hook.i++;\n  return [\n    state,\n    (newVal) => {\n      s[i].state = isFunc(newVal) ? newVal(state) : newVal;\n      _render(reRender);\n    },\n    () => s[i].state,\n  ];\n}\n\n// useEffect\nexport const useEffect = buildEffect(true);\n\n// useLayoutEffect\nexport const useLayoutEffect = buildEffect(false);\n\n// useReducer\nexport function useReducer(reducer, init, initLazy) {\n  const arr = useState(initLazy !== undefined ? initLazy(init) : init);\n  return [\n    arr[0],\n    (action) => {\n      arr[1](reducer(arr[0], action));\n    },\n  ];\n}\n\n// useMemo\nexport function useMemo(fn, deps) {\n  if (!reElem) return fn();\n  const { i, s } = curComp.hook;\n  if (!deps) deps = s.map((el) => el.state).filter(Boolean);\n  if (i >= s.length || hasChange(s[i].deps, deps)) {\n    s[i] = { val: fn(), deps };\n  }\n  curComp.hook.i++;\n  return s[i].val;\n}\n\n// useCallback\nexport const useCallback = (cb, deps) => useMemo(() => cb, deps);\n\n// useRef\nexport const useRef = (current) =>\n  useMemo(() => ({ current, ref: () => current }), []);\n\n// createContext\nexport const createContext = (init) => {\n  let value;\n  return {\n    Provider(newVal, fn) {\n      value = newVal || init;\n      return fn();\n    },\n    v: () => value,\n  };\n};\n\n// useContext\nexport const useContext = (c) => {\n  return c.v();\n};\n\n// CREDIT & ORIGINAL https://github.com/developit/vhtml\n// Add event, ref and style as object.\nexport function h(tag, attr) {\n  const args = [].slice.call(arguments, 2);\n  const arr = [];\n  let str = '';\n  attr = attr || {};\n  for (let i = args.length; i--; ) {\n    arr.push(typeof args[i] === 'number' ? String(args[i]) : args[i]);\n  }\n  if (isFunc(tag)) {\n    attr.children = arr.reverse();\n    return tag(attr);\n  }\n  if (tag) {\n    str += `<${tag}`;\n    if (attr) {\n      for (let k in attr) {\n        if (k !== 'children') {\n          let val = attr[k];\n          const type = typeof val;\n          if (type === 'function' || type === 'boolean' || type === 'object') {\n            const value = val;\n            const key = k.toLowerCase();\n            const id = idx++;\n            if (key === 'ref') {\n              val.ref = () => document.querySelector(`[c-${id}=\"${id}\"]`);\n            }\n            fno[id] = { key, value };\n            k = `c-${key}`;\n            val = id;\n            if (type !== 'function') rep[`${k}=\"${val}\"`] = { key, value };\n          }\n          if (\n            val !== undefined &&\n            val !== false &&\n            val !== null &&\n            k !== dangerHTML\n          ) {\n            str += ` ${k}=\"${escHTML(val)}\"`;\n          }\n        }\n      }\n    }\n    str += '>';\n  }\n  if (\n    [\n      'area',\n      'base',\n      'br',\n      'col',\n      'command',\n      'embed',\n      'hr',\n      'img',\n      'input',\n      'keygen',\n      'link',\n      'meta',\n      'param',\n      'source',\n      'track',\n      'wbr',\n    ].indexOf(tag) === -1\n  ) {\n    if (attr[dangerHTML]) {\n      str += attr[dangerHTML].__html;\n    } else {\n      for (let i = arr.length; i--; ) {\n        const child = Array.isArray(arr[i]) ? arr[i].join('') : arr[i];\n        if (typeof child === 'string') {\n          str += child[0] !== '<' ? escHTML(child) : child;\n        }\n      }\n    }\n    str += tag ? `</${tag}>` : '';\n  }\n  return str;\n}\n\nexport const Fragment = ({ children }) => h(null, null, children);\n"],"names":["sto","setTimeout","isFunc","val","filteredArray","arr1","arr2","newArr","Object","assign","i","len","length","idx","indexOf","splice","hasChange","old","next","some","dep","x","runCleanup","effect","clean","invoveEffect","runEffectFromStates","arr","status","effects","filter","el","layoutEffects","forEach","isVanicAttr","a","getAttr","node","attr","getAttribute","getNodeContent","childNodes","textContent","reRender","reElem","curComp","lastRes","fno","rep","hid","primIndex","primObject","_render","fn","res","elem","document","createElement","innerHTML","diff","template","domNodes","Array","prototype","slice","call","templateNodes","count","parentNode","removeChild","index","newNode","cloneNode","appendChild","attributes","tpl","name","nm","setAttribute","dom","nodeType","tagName","id","src","replaceChild","templateContent","fragment","createDocumentFragment","obj","value","key","toLowerCase","$","querySelector","s","initArr","check","querySelectorAll","map","match","k","c","cmp","hook","y","e","buildEffect","deps","isOk","state","Boolean","push","useState","undefined","newVal","useEffect","useLayoutEffect","useMemo","__C","p","prev","test","replace","init","Provider","v","ret","subs","arguments","reduce","start","end","no","type","isArray","join","ref","String","cb","reducer","initLazy","action","current"],"mappings":"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"}