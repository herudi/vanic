{"version":3,"file":"index.min.js","sources":["../src/diff.js","../src/index.js"],"sourcesContent":["// CREDIT & ORIGINAL: https://gomakethings.com/dom-diffing-with-vanilla-js\n// Add diff attribute\nfunction withTry(cb) {\n  try {\n    cb();\n  } catch (_e) {\n    /* noop */\n  }\n}\nfunction getAttr(node, attr) {\n  if (!node.getAttribute) return '';\n  return node.getAttribute(attr);\n}\nfunction getNodeContent(node, attr) {\n  if (attr) {\n    if (attr === 'href' || (attr[0] === 'c' && attr[1] === '-'))\n      return getAttr(node, attr);\n    if (typeof node[attr] !== 'string') return getAttr(node, attr);\n    return node[attr];\n  }\n  if (node.childNodes && node.childNodes.length > 0) return null;\n  return node.textContent;\n}\nexport function diff(template, elem) {\n  const domNodes = elem.childNodes;\n  const templateNodes = template.childNodes;\n  let count = domNodes.length - templateNodes.length;\n  if (count > 0) {\n    for (; count > 0; count--) {\n      domNodes[domNodes.length - count].parentNode.removeChild(\n        domNodes[domNodes.length - count]\n      );\n    }\n  }\n  templateNodes.forEach((node, index) => {\n    if (!domNodes[index]) {\n      const newNode = node.cloneNode(true);\n      elem.appendChild(newNode);\n      return;\n    }\n    if (node.attributes && node.attributes.length) {\n      let i = 0;\n      const len = node.attributes.length;\n      while (i < len) {\n        const attr = node.attributes[i];\n        if (attr.name) {\n          const tpl = getNodeContent(node, attr.name) || '';\n          const tplDom = getNodeContent(domNodes[index], attr.name) || '';\n          if (tpl !== tplDom) {\n            let nm = attr.name;\n            if (nm === 'class') nm = 'className';\n            else if (nm === 'for') nm = 'htmlFor';\n            withTry(() => domNodes[index].setAttribute(nm, tpl));\n            withTry(() => (domNodes[index][nm] = tpl));\n          }\n        }\n        i++;\n      }\n    }\n    if (\n      node.nodeType !== domNodes[index].nodeType ||\n      node.tagName !== domNodes[index].tagName ||\n      getAttr(node, 'c-comp') !== getAttr(domNodes[index], 'c-comp')\n    ) {\n      domNodes[index].parentNode.replaceChild(\n        node.cloneNode(true),\n        domNodes[index]\n      );\n      return;\n    }\n    const templateContent = getNodeContent(node);\n    if (\n      templateContent &&\n      templateContent !== getNodeContent(domNodes[index])\n    ) {\n      domNodes[index].textContent = templateContent;\n    }\n    if (domNodes[index].childNodes.length > 0 && node.childNodes.length < 1) {\n      domNodes[index].innerHTML = '';\n      return;\n    }\n    if (domNodes[index].childNodes.length < 1 && node.childNodes.length > 0) {\n      const fragment = document.createDocumentFragment();\n      diff(node, fragment);\n      domNodes[index].appendChild(fragment);\n      return;\n    }\n    if (node.childNodes.length > 0) {\n      diff(node, domNodes[index]);\n    }\n  });\n}\n","import { diff } from './diff.js';\n\nlet reRender;\nlet reElem;\nlet fno = [];\nlet primeObj = {};\nlet idx = 0;\nlet cid = 0;\nlet firsts = [];\nlet lasts = [];\nlet curHook;\nconst dangerHTML = 'dangerouslySetInnerHTML';\nconst sto = setTimeout;\nconst isFunc = (val) => typeof val === 'function';\nconst getSelector = (key, id) => reElem.querySelector(`[c-${key}=\"${id}\"]`);\nconst hasChange = (old, next) => !old || next.some((dep, x) => dep !== old[x]);\n\nfunction runEffect(hook) {\n  if (hook) {\n    hook.y.splice(0).forEach(invokeEffect);\n    if (hook.e.length) sto(() => hook.e.splice(0).forEach(invokeEffect));\n  }\n}\n\nexport function renderToString(child) {\n  if (isFunc(child)) child = child();\n  if (child === undefined) return child;\n  const toArray = (res) => {\n    const arr = [];\n    for (let i = 0; i < res.length; i++) {\n      arr.push(renderToString(res[i]));\n    }\n    return arr.flat().join('');\n  };\n  if (Array.isArray(child)) return toArray(child);\n  if (typeof child === 'string') return child;\n  // const runComp =\n  //   child.comp.name === 'Fragment' || child.comp.name === 'Provider' ? child.comp : comp(child.comp);\n  const res = comp(child.comp)(child.props);\n  if (res.__c) return renderToString(res);\n  if (Array.isArray(res)) return toArray(res);\n  return res;\n}\n\nfunction _render(fn, c) {\n  const res = comp(fn.comp)(fn.props);\n  const elem = document.createElement('div');\n  elem.innerHTML = res;\n  diff(elem, reElem);\n  fno.forEach((o, i) => {\n    const { key, value } = o;\n    if (key !== 'ref') {\n      const $ = getSelector(key, i);\n      if ($) $[key] = value;\n    }\n  });\n  lasts.forEach(\n    (k) =>\n      firsts.indexOf(k) === -1 &&\n      primeObj[k].s.forEach((e) => runCleanup(e, true))\n  );\n  firsts.forEach((k) => {\n    if (c) {\n      if (c[0] <= k[0]) runEffect(primeObj[k]);\n      else {\n        primeObj[k].e.splice(0);\n        primeObj[k].y.splice(0);\n      }\n    } else runEffect(primeObj[k]);\n  });\n  idx = 0;\n  cid = 0;\n  lasts = firsts;\n  firsts = [];\n  fno = [];\n  reRender = fn;\n}\n\nfunction runCleanup(effect, force) {\n  if (isFunc(effect.c)) {\n    effect.c();\n    effect.c = undefined;\n    effect.f = force;\n  }\n}\nfunction invokeEffect(effect) {\n  runCleanup(effect);\n  effect.c = effect.v();\n}\n\nexport function render(fn, elem) {\n  curHook = undefined;\n  reRender = undefined;\n  primeObj = {};\n  lasts = [];\n  firsts = [];\n  fno = [];\n  idx = 0;\n  cid = 0;\n  reElem = elem;\n  _render(fn.__c ? fn : h(fn));\n}\n\nconst buildEffect = (status) => (val, deps) => {\n  if (!reElem) return;\n  const { i, s, e, y } = curHook;\n  const isFirst = i >= s.length;\n  if (isFirst) s[i] = { d: deps, v: val, f: false };\n  if (isFirst || s[i].f || hasChange(s[i].d, deps)) {\n    (status ? e : y).push(s[i]);\n  }\n  s[i].v = val;\n  s[i].d = deps;\n  s[i].f = false;\n  curHook.i++;\n};\n\n// useState\nexport function useState(value) {\n  const { s, i, c } = curHook;\n  const st = s[i] === undefined ? value : s[i].st;\n  if (i >= s.length) s.push({ st });\n  curHook.i++;\n  return [\n    st,\n    (newVal) => {\n      s[i].st = isFunc(newVal) ? newVal(st) : newVal;\n      _render(reRender, c);\n    },\n    () => s[i].st,\n  ];\n}\n\n// useReducer\nexport function useReducer(reducer, init, initLazy) {\n  const arr = useState(initLazy !== undefined ? initLazy(init) : init);\n  return [arr[0], (action) => arr[1](reducer(arr[0], action))];\n}\n\n// useEffect\nexport const useEffect = buildEffect(true);\n\n// useLayoutEffect\nexport const useLayoutEffect = buildEffect(false);\n\n// useMemo\nexport function useMemo(fn, deps) {\n  if (!reElem) return fn();\n  const { i, s } = curHook;\n  if (i >= s.length || !deps || hasChange(s[i].d, deps)) {\n    s[i] = { v: fn(), d: deps };\n  }\n  curHook.i++;\n  return s[i].v;\n}\n\n// useCallback\nexport const useCallback = (cb, deps) => useMemo(() => cb, deps);\n\n// useRef\nexport const useRef = (current) =>\n  useMemo(() => ({ current, ref: () => current }), []);\n\n// createContext\nexport const createContext = (init) => {\n  let val;\n  return {\n    Provider({ value, children }) {\n      val = value !== undefined ? value : init;\n      return children;\n    },\n    v: () => val,\n  };\n};\n\n// useContext\nexport const useContext = (c) => c.v();\n\nfunction comp(fn) {\n  const c = cid++ + '-' + (fn.name || 'main').toLowerCase();\n  const init = primeObj[c] || { s: [], i: 0, e: [], y: [], c };\n  function _C(p) {\n    curHook = init;\n    curHook.i = 0;\n    let res = fn(p);\n    if (res.__c) res = renderToString(res);\n    if (typeof res === 'string' && reElem !== undefined) {\n      res = res.replace(/>/, ` c-comp=\"${c}\">`);\n    }\n    if (!primeObj[c]) primeObj[c] = init;\n    firsts.push(c);\n    return res;\n  }\n  return _C;\n}\n\n// CREDIT & ORIGINAL https://github.com/developit/vhtml\n// Add event, ref and style as object.\nexport function h(tag, props) {\n  const args = [].slice.call(arguments, 2);\n  const arr = [];\n  let str = '',\n    i = args.length;\n  props = props || {};\n  while (i--) {\n    if (args[i] !== false) {\n      arr.push(typeof args[i] === 'number' ? String(args[i]) : args[i]);\n    }\n  }\n  if (isFunc(tag)) {\n    props.children = arr.reverse();\n    return { comp: tag, props, __c: true };\n  }\n  if (tag) {\n    str += `<${tag}`;\n    if (props) {\n      for (let k in props) {\n        const val = props[k];\n        if (\n          val !== undefined &&\n          val !== null &&\n          k !== dangerHTML &&\n          k !== 'children'\n        ) {\n          const type = typeof val;\n          if (type === 'function' || type === 'boolean' || type === 'object') {\n            const value = val;\n            const key = k.toLowerCase();\n            if (type === 'object' && key !== 'ref') {\n              str += ` ${k}=\"${Object.keys(val).reduce(\n                (a, b) =>\n                  a +\n                  b\n                    .split(/(?=[A-Z])/)\n                    .join('-')\n                    .toLowerCase() +\n                  ':' +\n                  val[b] +\n                  ';',\n                ''\n              )}\"`;\n            } else if (reElem) {\n              const id = idx++;\n              if (key === 'ref') {\n                val.ref = () => getSelector(key, id);\n              }\n              fno[id] = { key, value };\n              str += ` c-${key}=\"${id}\"`;\n            } else if (val === true) str += ` ${k}`;\n            else if (val === false) str += '';\n          } else str += ` ${k}=\"${val}\"`;\n        }\n      }\n    }\n    str += '>';\n  }\n  if (\n    [\n      'area',\n      'base',\n      'br',\n      'col',\n      'command',\n      'embed',\n      'hr',\n      'img',\n      'input',\n      'keygen',\n      'link',\n      'meta',\n      'param',\n      'source',\n      'track',\n      'wbr',\n    ].indexOf(tag) === -1\n  ) {\n    if (props[dangerHTML]) {\n      str += props[dangerHTML].__html;\n    } else {\n      let j = arr.length;\n      while (j--) {\n        const child = renderToString(arr[j]);\n        if (typeof child === 'string') str += child;\n      }\n    }\n    str += tag ? `</${tag}>` : '';\n  }\n  return str;\n}\n\nexport const Fragment = ({ children }) => children;\n"],"names":["withTry","cb","_e","getAttr","node","attr","getAttribute","getNodeContent","childNodes","length","textContent","diff","template","elem","domNodes","templateNodes","count","parentNode","removeChild","forEach","index","attributes","i","len","name","tpl","tplDom","nm","setAttribute","nodeType","tagName","templateContent","innerHTML","fragment","document","createDocumentFragment","appendChild","replaceChild","cloneNode","newNode","reRender","reElem","curHook","fno","primeObj","idx","cid","firsts","lasts","dangerHTML","sto","setTimeout","isFunc","val","getSelector","key","id","querySelector","concat","hasChange","old","next","some","dep","x","runEffect","hook","y","splice","invokeEffect","e","renderToString","child","undefined","toArray","res","arr","push","flat","join","Array","isArray","comp","props","__c","_render","fn","c","createElement","o","value","$","k","indexOf","s","runCleanup","effect","force","f","v","buildEffect","status","deps","_curHook","isFirst","d","useState","_curHook2","st","newVal","useEffect","useLayoutEffect","useMemo","_curHook3","toLowerCase","init","p","replace","h","tag","args","slice","call","arguments","str","String","children","reverse","_loop","type","Object","keys","reduce","a","b","split","ref","__html","j","_ref2","Provider","_ref","reducer","initLazy","action","current"],"mappings":"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"}