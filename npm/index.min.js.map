{"version":3,"file":"index.min.js","sources":["../src/utils.js","../src/diff.js","../src/index.js"],"sourcesContent":["export const sto = setTimeout;\n\nexport function filteredArray(arr1, arr2) {\n  const newArr = Object.assign([], arr1);\n  let i = 0;\n  const len = arr2.length;\n  while (i < len) {\n    const idx = newArr.indexOf(arr2[i]);\n    if (idx >= 0) newArr.splice(idx, 1);\n    i++;\n  }\n  return newArr;\n}\n\nexport function escHTML(unsafe) {\n  return String(unsafe)\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\nfunction styleToString(style) {\n  return Object.keys(style).reduce(\n    (acc, key) =>\n      acc +\n      key\n        .split(/(?=[A-Z])/)\n        .join('-')\n        .toLowerCase() +\n      ':' +\n      style[key] +\n      ';',\n    ''\n  );\n}\n\nexport function removeAttributes(fn, rep) {\n  return (typeof fn === 'string' ? fn : fn()).replace(/ c-.*=\"\\d+\"/g, (a) => {\n    const arr = (a || '').split(' ');\n    let str = '';\n    for (let i = 0; i < arr.length; i++) {\n      const ret = rep[arr[i]];\n      if (ret) {\n        const { key, value } = ret;\n        const type = typeof value;\n        if (type === 'object' && key !== 'ref') {\n          str += ` ${key}=\"${styleToString(value)}\"`;\n        }\n        if (value === true) str += ` ${key}`;\n      }\n    }\n    return str;\n  });\n}\n\nexport function hasChange(old, next) {\n  return (\n    !old || old.length !== next.length || next.some((dep, x) => dep !== old[x])\n  );\n}\n\nfunction runCleanup(effect) {\n  if (typeof effect.clean === 'function') effect.clean();\n}\n\nexport function invoveEffect(effect, i) {\n  if (typeof i !== 'boolean') {\n    runCleanup(effect);\n    effect.clean = undefined;\n  }\n  if (typeof effect.val === 'function') {\n    sto(() => (effect.clean = effect.val()));\n  }\n}\n\nexport function cleanEffect(c) {\n  if (c.hook) sto(() => c.hook.s.forEach(runCleanup));\n}\n\nexport function runEffectFromStates(arr, status) {\n  if (arr.length) {\n    const effects = arr.filter((el) => el.status === true);\n    const layoutEffects = arr.filter((el) => el.status === false);\n    if (effects.length)\n      sto(() => effects.forEach((effect) => invoveEffect(effect, status)));\n    if (layoutEffects.length)\n      layoutEffects.forEach((effect) => invoveEffect(effect, status));\n  }\n}\n","// CREDIT & ORIGINAL: https://gomakethings.com/dom-diffing-with-vanilla-js\n// Add diff attribute\nconst isVanicAttr = (a) => a[0] === 'c' && a[1] === '-';\nfunction isNotMatch(node, dom) {\n  return (\n    node.nodeType !== dom.nodeType ||\n    node.tagName !== dom.tagName ||\n    node.id !== dom.id ||\n    node.src !== dom.src ||\n    getAttr(node, 'c-comp') !== getAttr(dom, 'c-comp')\n  );\n}\nfunction getAttr(node, attr) {\n  if (!node.getAttribute) return '';\n  return node.getAttribute(attr);\n}\nfunction getNodeContent(node, attr) {\n  if (attr) {\n    if (attr === 'href' || isVanicAttr(attr)) return getAttr(node, attr);\n    if (typeof node[attr] !== 'string') return getAttr(node, attr);\n    return node[attr];\n  }\n  if (node.childNodes && node.childNodes.length > 0) return null;\n  return node.textContent;\n}\nexport function diff(template, elem) {\n  const domNodes = Array.prototype.slice.call(elem.childNodes);\n  const templateNodes = Array.prototype.slice.call(template.childNodes);\n  let count = domNodes.length - templateNodes.length;\n  if (count > 0) {\n    for (; count > 0; count--) {\n      domNodes[domNodes.length - count].parentNode.removeChild(\n        domNodes[domNodes.length - count]\n      );\n    }\n  }\n  templateNodes.forEach(function (node, index) {\n    if (!domNodes[index]) {\n      const newNode = node.cloneNode(true);\n      elem.appendChild(newNode);\n      return;\n    }\n    if (node.attributes && node.attributes.length) {\n      let i = 0;\n      const len = node.attributes.length;\n      while (i < len) {\n        const attr = node.attributes[i];\n        if (attr.name) {\n          const tpl = getNodeContent(node, attr.name) || '';\n          const tplDom = getNodeContent(domNodes[index], attr.name) || '';\n          if (tpl !== tplDom) {\n            let nm = attr.name;\n            if (isVanicAttr(nm)) {\n              if (nm !== 'c-comp') {\n                if (domNodes[index].setAttribute) {\n                  domNodes[index].setAttribute(nm, tpl);\n                }\n              }\n            } else {\n              if (nm === 'class') nm = 'className';\n              else if (nm === 'for') nm = 'htmlFor';\n              domNodes[index][nm] = tpl;\n            }\n          }\n        }\n        i++;\n      }\n    }\n    if (isNotMatch(node, domNodes[index])) {\n      domNodes[index].parentNode.replaceChild(\n        node.cloneNode(true),\n        domNodes[index]\n      );\n      return;\n    }\n    const templateContent = getNodeContent(node);\n    if (\n      templateContent &&\n      templateContent !== getNodeContent(domNodes[index])\n    ) {\n      domNodes[index].textContent = templateContent;\n    }\n    if (domNodes[index].childNodes.length > 0 && node.childNodes.length < 1) {\n      domNodes[index].innerHTML = '';\n      return;\n    }\n    if (domNodes[index].childNodes.length < 1 && node.childNodes.length > 0) {\n      const fragment = document.createDocumentFragment();\n      diff(node, fragment);\n      domNodes[index].appendChild(fragment);\n      return;\n    }\n    if (node.childNodes.length > 0) {\n      diff(node, domNodes[index]);\n    }\n  });\n}\n","import {\n  filteredArray,\n  hasChange,\n  removeAttributes,\n  escHTML,\n  sto,\n  cleanEffect,\n  invoveEffect,\n  runEffectFromStates,\n} from './utils.js';\nimport { diff } from './diff.js';\n\nlet reRender;\nlet reElem;\nlet fno = [];\nlet rep = {};\nlet idx = 0;\nlet hid = 0;\nlet curComp;\nlet primIndex = 0;\nlet lastRes;\nlet lastFn;\nconst primObject = {};\nconst dangerHTML = 'dangerouslySetInnerHTML';\n\nfunction _render(fn) {\n  const res = fn();\n  const elem = document.createElement('div');\n  elem.innerHTML = res;\n  diff(elem, reElem);\n  let i = fno.length;\n  while (i--) {\n    const obj = fno[i];\n    const value = obj.value;\n    const key = obj.key.toLowerCase();\n    if (key !== 'ref') {\n      const $ = reElem.querySelector(`[c-${key}=\"${i}\"]`);\n      if ($) {\n        if (typeof value === 'object') {\n          for (const s in value) $[key][s] = value[s];\n        } else {\n          $[key] = value;\n        }\n      }\n    }\n  }\n  idx = 0;\n  fno = [];\n  const check = reElem.querySelectorAll('[c-comp]');\n  if (reRender && check.length !== primIndex) {\n    const arr = Array.prototype.map.call(\n      check,\n      (el) => el.getAttribute && el.getAttribute('c-comp')\n    );\n    const initArr = lastRes.match(/(?<=c-comp=\")(.*?)(?=\")/gm) || [];\n    filteredArray(initArr, arr).forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) cleanEffect(cmp);\n    });\n    filteredArray(arr, initArr).forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) {\n        const { hook } = cmp;\n        hook.y.splice(0);\n        hook.e.splice(0);\n        runEffectFromStates(hook.s, true);\n      }\n    });\n    primIndex = arr.length;\n  }\n  lastRes = res;\n  reRender = fn;\n}\n\nexport function html(ret) {\n  const subs = [].slice.call(arguments, 1);\n  return ret.reduce((start, end, no) => {\n    let val = subs[no - 1];\n    if (val === null || val === undefined) val = '';\n    if (Array.isArray(val)) val = val.join('');\n    const type = typeof val;\n    if (type === 'function' || type === 'boolean' || type === 'object') {\n      const arr = start.match(/[^ ]+/g);\n      const value = val;\n      const key = (arr[arr.length - 1] || '').replace(/=|\"/g, '').toLowerCase();\n      if (!/<|>/.test(key)) {\n        const id = idx++;\n        const attr = `c-${key}=\"${id}`;\n        if (key === 'ref') {\n          val.ref = () => document.querySelector(`[${attr}\"]`);\n        }\n        fno[id] = { key, value };\n        if (type !== 'function') rep[`${attr}\"`] = { key, value };\n        start = arr.slice(0, -1).join(' ') + ` ${attr}`;\n      }\n      val = '';\n    }\n    return start + String(val) + end;\n  });\n}\n\nexport function renderToString(fn) {\n  return removeAttributes(fn, rep);\n}\n\nexport function render(fn, elem) {\n  reRender = undefined;\n  lastRes = undefined;\n  fno = [];\n  rep = {};\n  idx = 0;\n  reElem = elem;\n  _render(typeof fn === 'function' ? fn : lastFn);\n}\nexport const comp = (fn) => {\n  const hook = (__C.hook = { i: 0, e: [], y: [], s: [] });\n  const id = hid++;\n  function __C(p) {\n    const prev = curComp;\n    curComp = __C;\n    hook.i = 0;\n    let res = fn(p === undefined ? {} : p);\n    if (typeof res === 'string') {\n      if (!/<.*>/.test(res)) res = `<notag>${res}</notag>`;\n      res = res.replace(/>/, ` c-comp=\"${id}\">`);\n      primObject[`${id}`] = curComp;\n      if (!reRender) primIndex++;\n    }\n    if (prev) curComp = prev;\n    if (!lastFn) lastFn = curComp;\n    if (reRender) {\n      if (hook.e.length) sto(() => hook.e.splice(0).forEach(invoveEffect));\n      if (hook.y.length) hook.y.splice(0).forEach(invoveEffect);\n    } else runEffectFromStates(hook.s);\n    return res;\n  }\n  return __C;\n};\n\nconst buildEffect = (status) => (val, deps) => {\n  if (!reElem) return;\n  const { i, s, e, y } = curComp.hook;\n  if (!deps) deps = s.map((el) => el.state).filter(Boolean);\n  const isOk = i >= s.length;\n  if (isOk) s[i] = { deps, val, status };\n  if (reRender && (isOk || hasChange(s[i].deps, deps))) {\n    (status ? e : y).push(s[i]);\n  }\n  s[i].val = val;\n  s[i].deps = deps;\n  s[i].status = status;\n  curComp.hook.i++;\n};\n\n// useState\nexport function useState(value) {\n  const { s, i } = curComp.hook;\n  const state = s[i] === undefined ? value : s[i].state;\n  if (i >= s.length) s.push({ state });\n  curComp.hook.i++;\n  return [\n    state,\n    (newVal) => {\n      s[i].state = typeof newVal === 'function' ? newVal(state) : newVal;\n      _render(reRender);\n    },\n    () => s[i].state,\n  ];\n}\n\n// useEffect\nexport const useEffect = buildEffect(true);\n\n// useLayoutEffect\nexport const useLayoutEffect = buildEffect(false);\n\n// useReducer\nexport function useReducer(reducer, init, initLazy) {\n  const arr = useState(initLazy !== undefined ? initLazy(init) : init);\n  return [\n    arr[0],\n    (action) => {\n      arr[1](reducer(arr[0], action));\n    },\n  ];\n}\n\n// useMemo\nexport function useMemo(fn, deps) {\n  if (!reElem) return fn();\n  const { i, s } = curComp.hook;\n  if (!deps) deps = s.map((el) => el.state).filter(Boolean);\n  if (i >= s.length || hasChange(s[i].deps, deps)) {\n    s[i] = { val: fn(), deps };\n  }\n  curComp.hook.i++;\n  return s[i].val;\n}\n\n// useCallback\nexport const useCallback = (cb, deps) => useMemo(() => cb, deps);\n\n// useRef\nexport const useRef = (current) =>\n  useMemo(() => ({ current, ref: () => current }), []);\n\n// createContext\nexport const createContext = (init) => {\n  let value;\n  return {\n    Provider(newVal, fn) {\n      value = newVal || init;\n      return fn();\n    },\n    v: () => value,\n  };\n};\n\n// useContext\nexport const useContext = (c) => {\n  return c.v();\n};\n\n// CREDIT & ORIGINAL https://github.com/developit/vhtml\n// Add event, ref and style as object.\nexport function h(tag, attr) {\n  const args = [].slice.call(arguments, 2);\n  const arr = [];\n  let str = '';\n  attr = attr || {};\n  for (let i = args.length; i--; ) {\n    arr.push(typeof args[i] === 'number' ? String(args[i]) : args[i]);\n  }\n  if (typeof tag === 'function') {\n    attr.children = arr.reverse();\n    return tag(attr);\n  }\n  if (tag) {\n    str += `<${tag}`;\n    if (attr) {\n      for (let k in attr) {\n        if (k !== 'children') {\n          let val = attr[k];\n          const type = typeof val;\n          if (type === 'function' || type === 'boolean' || type === 'object') {\n            const value = val;\n            const key = k.toLowerCase();\n            const id = idx++;\n            if (key === 'ref') {\n              val.ref = () => document.querySelector(`[c-${id}=\"${id}\"]`);\n            }\n            fno[id] = { key, value };\n            k = `c-${key}`;\n            val = id;\n            if (type !== 'function') rep[`${k}=\"${val}\"`] = { key, value };\n          }\n          if (\n            val !== undefined &&\n            val !== false &&\n            val !== null &&\n            k !== dangerHTML\n          ) {\n            str += ` ${k}=\"${escHTML(val)}\"`;\n          }\n        }\n      }\n    }\n    str += '>';\n  }\n  if (\n    [\n      'area',\n      'base',\n      'br',\n      'col',\n      'command',\n      'embed',\n      'hr',\n      'img',\n      'input',\n      'keygen',\n      'link',\n      'meta',\n      'param',\n      'source',\n      'track',\n      'wbr',\n    ].indexOf(tag) === -1\n  ) {\n    if (attr[dangerHTML]) {\n      str += attr[dangerHTML].__html;\n    } else {\n      for (let i = arr.length; i--; ) {\n        const child = Array.isArray(arr[i]) ? arr[i].join('') : arr[i];\n        if (typeof child === 'string') {\n          str += child[0] !== '<' ? escHTML(child) : child;\n        }\n      }\n    }\n    str += tag ? `</${tag}>` : '';\n  }\n  return str;\n}\n\nexport const Fragment = ({ children }) => html(null, null, children);\n"],"names":["sto","setTimeout","filteredArray","arr1","arr2","newArr","Object","assign","i","len","length","idx","indexOf","splice","hasChange","old","next","some","dep","x","runCleanup","effect","clean","invoveEffect","val","runEffectFromStates","arr","status","effects","filter","el","layoutEffects","forEach","isVanicAttr","a","getAttr","node","attr","getAttribute","getNodeContent","childNodes","textContent","reRender","reElem","curComp","lastRes","lastFn","fno","rep","hid","primIndex","primObject","_render","fn","res","elem","document","createElement","innerHTML","diff","template","domNodes","Array","prototype","slice","call","templateNodes","count","parentNode","removeChild","index","newNode","cloneNode","appendChild","attributes","tpl","name","nm","setAttribute","dom","nodeType","tagName","id","src","replaceChild","templateContent","fragment","createDocumentFragment","obj","value","key","toLowerCase","$","querySelector","s","initArr","check","querySelectorAll","map","match","k","c","cmp","hook","y","e","html","ret","subs","arguments","reduce","start","end","no","type","isArray","join","replace","test","concat","ref","String","buildEffect","deps","isOk","state","Boolean","push","useState","undefined","newVal","useEffect","useLayoutEffect","useMemo","_ref","children","__C","p","prev","init","Provider","v","cb","reducer","initLazy","action","current"],"mappings":"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"}