{"version":3,"file":"index.min.js","sources":["../src/utils.js","../src/diff.js","../src/index.js"],"sourcesContent":["export const sto = setTimeout;\n\nexport const isFunc = (val) => typeof val === 'function';\n\nexport function filteredArray(arr1, arr2) {\n  const newArr = Object.assign([], arr1);\n  let i = 0;\n  const len = arr2.length;\n  while (i < len) {\n    const idx = newArr.indexOf(arr2[i]);\n    if (idx >= 0) newArr.splice(idx, 1);\n    i++;\n  }\n  return newArr;\n}\n\nexport function escHTML(unsafe) {\n  return String(unsafe)\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\nfunction styleToString(style) {\n  return Object.keys(style).reduce(\n    (acc, key) =>\n      acc +\n      key\n        .split(/(?=[A-Z])/)\n        .join('-')\n        .toLowerCase() +\n      ':' +\n      style[key] +\n      ';',\n    ''\n  );\n}\n\nexport function removeAttributes(fn, rep) {\n  return (typeof fn === 'string' ? fn : fn()).replace(/ c-.*=\"\\d+\"/g, (a) => {\n    const arr = (a || '').split(' ');\n    let str = '';\n    for (let i = 0; i < arr.length; i++) {\n      const ret = rep[arr[i]];\n      if (ret) {\n        const { key, value } = ret;\n        const type = typeof value;\n        if (type === 'object' && key !== 'ref') {\n          str += ` ${key}=\"${styleToString(value)}\"`;\n        }\n        if (value === true) str += ` ${key}`;\n      }\n    }\n    return str;\n  });\n}\n\nexport function hasChange(old, next) {\n  return !old || next.some((dep, x) => dep !== old[x]);\n}\n\nfunction runCleanup(effect) {\n  if (isFunc(effect.c)) effect.c();\n}\n\nexport function findParent(elem) {\n  if (elem.tagName === 'BODY' || !elem.parentNode) return null;\n  const p = elem.parentNode;\n  if (p && p.getAttribute) {\n    const attr = p.getAttribute('c-comp');\n    if (attr) return attr;\n  }\n  return findParent(p);\n}\n\nexport function invoveEffect(effect, status, makeSto, force) {\n  const hc = effect._d ? hasChange(effect.d, effect._d) : true;\n  effect._d = effect.d;\n  if (force || status || hc) {\n    if (!status) {\n      runCleanup(effect);\n      effect.c = undefined;\n    }\n    if (isFunc(effect.v)) {\n      if (makeSto) sto(() => (effect.c = effect.v()));\n      else effect.c = effect.v();\n    }\n  }\n}\n\nexport function cleanEffect(c) {\n  if (c.hook) sto(() => c.hook.s.forEach(runCleanup));\n}\n\nexport function runEffectFromStates(hook, status, makeSto, force) {\n  const arr = hook.s,\n    len = arr.length;\n  let i = 0;\n  if (len) {\n    const effects = [];\n    const layoutEffects = [];\n    const makeEffect = (effect) => invoveEffect(effect, status, makeSto, force);\n    while (i < len) {\n      const s = arr[i];\n      if (s.s === true) effects.push(s);\n      else if (s.s === false) layoutEffects.push(s);\n      i++;\n    }\n    if (effects.length) sto(() => effects.forEach(makeEffect));\n    layoutEffects.forEach(makeEffect);\n  }\n}\n","// CREDIT & ORIGINAL: https://gomakethings.com/dom-diffing-with-vanilla-js\n// Add diff attribute\nconst isVanicAttr = (a) => a[0] === 'c' && a[1] === '-';\nfunction isNotMatch(node, dom) {\n  return (\n    node.nodeType !== dom.nodeType ||\n    node.tagName !== dom.tagName ||\n    node.id !== dom.id ||\n    node.src !== dom.src ||\n    getAttr(node, 'c-comp') !== getAttr(dom, 'c-comp')\n  );\n}\nfunction getAttr(node, attr) {\n  if (!node.getAttribute) return '';\n  return node.getAttribute(attr);\n}\nfunction getNodeContent(node, attr) {\n  if (attr) {\n    if (attr === 'href' || isVanicAttr(attr)) return getAttr(node, attr);\n    if (typeof node[attr] !== 'string') return getAttr(node, attr);\n    return node[attr];\n  }\n  if (node.childNodes && node.childNodes.length > 0) return null;\n  return node.textContent;\n}\nexport function diff(template, elem) {\n  const domNodes = Array.prototype.slice.call(elem.childNodes);\n  const templateNodes = Array.prototype.slice.call(template.childNodes);\n  let count = domNodes.length - templateNodes.length;\n  if (count > 0) {\n    for (; count > 0; count--) {\n      domNodes[domNodes.length - count].parentNode.removeChild(\n        domNodes[domNodes.length - count]\n      );\n    }\n  }\n  templateNodes.forEach(function (node, index) {\n    if (!domNodes[index]) {\n      const newNode = node.cloneNode(true);\n      elem.appendChild(newNode);\n      return;\n    }\n    if (node.attributes && node.attributes.length) {\n      let i = 0;\n      const len = node.attributes.length;\n      while (i < len) {\n        const attr = node.attributes[i];\n        if (attr.name) {\n          const tpl = getNodeContent(node, attr.name) || '';\n          const tplDom = getNodeContent(domNodes[index], attr.name) || '';\n          if (tpl !== tplDom) {\n            let nm = attr.name;\n            if (isVanicAttr(nm)) {\n              if (nm !== 'c-comp') {\n                if (domNodes[index].setAttribute) {\n                  domNodes[index].setAttribute(nm, tpl);\n                }\n              }\n            } else {\n              if (nm === 'class') nm = 'className';\n              else if (nm === 'for') nm = 'htmlFor';\n              domNodes[index][nm] = tpl;\n            }\n          }\n        }\n        i++;\n      }\n    }\n    if (isNotMatch(node, domNodes[index])) {\n      domNodes[index].parentNode.replaceChild(\n        node.cloneNode(true),\n        domNodes[index]\n      );\n      return;\n    }\n    const templateContent = getNodeContent(node);\n    if (\n      templateContent &&\n      templateContent !== getNodeContent(domNodes[index])\n    ) {\n      domNodes[index].textContent = templateContent;\n    }\n    if (domNodes[index].childNodes.length > 0 && node.childNodes.length < 1) {\n      domNodes[index].innerHTML = '';\n      return;\n    }\n    if (domNodes[index].childNodes.length < 1 && node.childNodes.length > 0) {\n      const fragment = document.createDocumentFragment();\n      diff(node, fragment);\n      domNodes[index].appendChild(fragment);\n      return;\n    }\n    if (node.childNodes.length > 0) {\n      diff(node, domNodes[index]);\n    }\n  });\n}\n","import {\n  filteredArray,\n  hasChange,\n  removeAttributes,\n  escHTML,\n  cleanEffect,\n  runEffectFromStates,\n  isFunc,\n  findParent,\n} from './utils.js';\nimport { diff } from './diff.js';\n\nlet reRender;\nlet reElem;\nlet fno = [];\nlet rep = {};\nlet idx = 0;\nlet hid = 0;\nlet curComp;\nlet primIndex = 0;\nlet lastRes;\nconst primObject = {};\nconst dangerHTML = 'dangerouslySetInnerHTML';\nconst mapElem = Array.prototype.map;\n\nfunction _render(fn, c) {\n  const res = fn();\n  const elem = document.createElement('div');\n  elem.innerHTML = res;\n  diff(elem, reElem);\n  let i = fno.length;\n  while (i--) {\n    const obj = fno[i];\n    const value = obj.value;\n    const key = obj.key.toLowerCase();\n    if (key !== 'ref') {\n      const $ = reElem.querySelector(`[c-${key}=\"${i}\"]`);\n      if ($) {\n        if (typeof value === 'object') {\n          for (const s in value) $[key][s] = value[s];\n        } else {\n          $[key] = value;\n        }\n      }\n    }\n  }\n  idx = 0;\n  fno = [];\n  const check = reElem.querySelectorAll('[c-comp]');\n  let iRuns = [];\n  if (reRender && check.length !== primIndex) {\n    const arr = mapElem.call(\n      check,\n      (el) => el.getAttribute && el.getAttribute('c-comp')\n    );\n    const initArr = lastRes.match(/(?<=c-comp=\")(.*?)(?=\")/gm) || [];\n    filteredArray(initArr, arr).forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) cleanEffect(cmp);\n    });\n    iRuns = filteredArray(arr, initArr);\n    iRuns.forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) runEffectFromStates(cmp.hook, true, true);\n    });\n    primIndex = arr.length;\n  }\n  lastRes = res;\n  if (c) {\n    const elem = reElem.querySelector(`[c-comp=\"${c}\"]`);\n    const elems = elem.querySelectorAll(`[c-comp]`) || [];\n    let keys = mapElem\n      .call(elems, (el) => {\n        if (findParent(el) === c)\n          return el.getAttribute && el.getAttribute('c-comp');\n        return null;\n      })\n      .concat([c])\n      .filter(Boolean);\n    if (iRuns.length) keys = filteredArray(keys, iRuns);\n    keys.forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) runEffectFromStates(cmp.hook);\n    });\n  }\n  reRender = fn;\n}\n\nexport function html(ret) {\n  const subs = [].slice.call(arguments, 1);\n  return ret.reduce((start, end, no) => {\n    let val = subs[no - 1];\n    if (val === null || val === undefined) val = '';\n    if (Array.isArray(val)) val = val.join('');\n    const type = typeof val;\n    if (type === 'function' || type === 'boolean' || type === 'object') {\n      const arr = start.match(/[^ ]+/g);\n      const value = val;\n      const key = (arr[arr.length - 1] || '').replace(/=|\"/g, '').toLowerCase();\n      const id = idx++;\n      const attr = `c-${key}=\"${id}`;\n      if (key === 'ref') {\n        val.ref = () => reElem.querySelector(`[${attr}\"]`);\n      }\n      fno[id] = { key, value };\n      if (type !== 'function') rep[`${attr}\"`] = { key, value };\n      start = arr.slice(0, -1).join(' ') + ` ${attr}`;\n      val = '';\n    }\n    return start + String(val) + end;\n  });\n}\n\nexport function renderToString(fn) {\n  return removeAttributes(fn, rep);\n}\n\nexport function render(fn, elem) {\n  reRender = undefined;\n  lastRes = undefined;\n  fno = [];\n  rep = {};\n  idx = 0;\n  reElem = elem;\n  _render(fn);\n}\nexport const comp = (fn) => {\n  const id = hid++;\n  const hook = (__C.hook = { i: 0, s: [], c: '' + id });\n  function __C(p) {\n    const prev = curComp;\n    curComp = __C;\n    hook.i = 0;\n    let res = fn(p === undefined ? {} : p);\n    if (typeof res === 'string') {\n      if (!/<.*>/.test(res)) res = `<notag>${res}</notag>`;\n      res = res.replace(/>/, ` c-comp=\"${id}\">`);\n      primObject[`${id}`] = curComp;\n      if (!reRender) primIndex++;\n    }\n    if (prev) curComp = prev;\n    if (!reRender) runEffectFromStates(hook, void 0, true, true);\n    return res;\n  }\n  return __C;\n};\n\nconst buildEffect = (status) => (val, deps) => {\n  if (!reElem) return;\n  const { i, s } = curComp.hook;\n  if (i >= s.length) s[i] = { d: deps, v: val, s: status };\n  s[i].v = val;\n  s[i].d = deps;\n  s[i].s = status;\n  curComp.hook.i++;\n};\n\n// useState\nexport function useState(value) {\n  const { s, i, c } = curComp.hook;\n  const st = s[i] === undefined ? value : s[i].st;\n  if (i >= s.length) s.push({ st });\n  curComp.hook.i++;\n  return [\n    st,\n    (newVal) => {\n      s[i].st = isFunc(newVal) ? newVal(st) : newVal;\n      _render(reRender, c);\n    },\n    () => s[i].st,\n  ];\n}\n\n// useEffect\nexport const useEffect = buildEffect(true);\n\n// useLayoutEffect\nexport const useLayoutEffect = buildEffect(false);\n\n// useReducer\nexport function useReducer(reducer, init, initLazy) {\n  const arr = useState(initLazy !== undefined ? initLazy(init) : init);\n  return [\n    arr[0],\n    (action) => {\n      arr[1](reducer(arr[0], action));\n    },\n  ];\n}\n\n// useMemo\nexport function useMemo(fn, deps) {\n  if (!reElem) return fn();\n  const { i, s } = curComp.hook;\n  if (i >= s.length || hasChange(s[i].d, deps)) {\n    s[i] = { v: fn(), d: deps };\n  }\n  curComp.hook.i++;\n  return s[i].v;\n}\n\n// useCallback\nexport const useCallback = (cb, deps) => useMemo(() => cb, deps);\n\n// useRef\nexport const useRef = (current) =>\n  useMemo(() => ({ current, ref: () => current }), []);\n\n// createContext\nexport const createContext = (init) => {\n  let value;\n  return {\n    Provider(newVal, fn) {\n      value = newVal || init;\n      return fn();\n    },\n    v: () => value,\n  };\n};\n\n// useContext\nexport const useContext = (c) => {\n  return c.v();\n};\n\n// CREDIT & ORIGINAL https://github.com/developit/vhtml\n// Add event, ref and style as object.\nexport function h(tag, attr) {\n  const args = [].slice.call(arguments, 2);\n  const arr = [];\n  let str = '';\n  attr = attr || {};\n  for (let i = args.length; i--; ) {\n    arr.push(typeof args[i] === 'number' ? String(args[i]) : args[i]);\n  }\n  if (isFunc(tag)) {\n    attr.children = arr.reverse();\n    return tag(attr);\n  }\n  if (tag) {\n    str += `<${tag}`;\n    if (attr) {\n      for (let k in attr) {\n        if (k !== 'children') {\n          let val = attr[k];\n          const type = typeof val;\n          if (type === 'function' || type === 'boolean' || type === 'object') {\n            const value = val;\n            const key = k.toLowerCase();\n            const id = idx++;\n            if (key === 'ref') {\n              val.ref = () => reElem.querySelector(`[c-${key}=\"${id}\"]`);\n            }\n            fno[id] = { key, value };\n            k = `c-${key}`;\n            val = id;\n            if (type !== 'function') rep[`${k}=\"${val}\"`] = { key, value };\n          }\n          if (\n            val !== undefined &&\n            val !== false &&\n            val !== null &&\n            k !== dangerHTML\n          ) {\n            str += ` ${k}=\"${escHTML(val)}\"`;\n          }\n        }\n      }\n    }\n    str += '>';\n  }\n  if (\n    [\n      'area',\n      'base',\n      'br',\n      'col',\n      'command',\n      'embed',\n      'hr',\n      'img',\n      'input',\n      'keygen',\n      'link',\n      'meta',\n      'param',\n      'source',\n      'track',\n      'wbr',\n    ].indexOf(tag) === -1\n  ) {\n    if (attr[dangerHTML]) {\n      str += attr[dangerHTML].__html;\n    } else {\n      for (let i = arr.length; i--; ) {\n        const child = Array.isArray(arr[i]) ? arr[i].join('') : arr[i];\n        if (typeof child === 'string') {\n          str += child[0] !== '<' ? escHTML(child) : child;\n        }\n      }\n    }\n    str += tag ? `</${tag}>` : '';\n  }\n  return str;\n}\n\nexport const Fragment = ({ children }) => h(null, null, children);\n"],"names":["sto","setTimeout","isFunc","val","filteredArray","arr1","arr2","newArr","Object","assign","i","len","length","idx","indexOf","splice","hasChange","old","next","some","dep","x","runCleanup","effect","c","runEffectFromStates","hook","status","makeSto","force","arr","s","effects","layoutEffects","makeEffect","hc","_d","d","v","push","forEach","isVanicAttr","a","getAttr","node","attr","getAttribute","getNodeContent","childNodes","textContent","reRender","reElem","curComp","lastRes","fno","rep","hid","primIndex","primObject","mapElem","Array","prototype","map","_render","fn","res","elem","document","createElement","innerHTML","diff","template","domNodes","slice","call","templateNodes","count","parentNode","removeChild","index","newNode","cloneNode","appendChild","attributes","tpl","name","nm","setAttribute","dom","nodeType","tagName","id","src","replaceChild","templateContent","fragment","createDocumentFragment","obj","value","key","toLowerCase","$","querySelector","elems","check","querySelectorAll","iRuns","el","initArr","match","k","cmp","keys","findParent","p","concat","filter","Boolean","buildEffect","deps","useState","st","undefined","newVal","useEffect","useLayoutEffect","useMemo","__C","prev","test","replace","init","Provider","ret","subs","arguments","reduce","start","end","no","type","isArray","join","ref","String","cb","reducer","initLazy","action","current"],"mappings":"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"}