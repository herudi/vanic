{"version":3,"file":"index.min.js","sources":["../src/vanic/diff.js","../src/vanic/index.js"],"sourcesContent":["// CREDIT & ORIGINAL: https://gomakethings.com/dom-diffing-with-vanilla-js\n// Add diff attribute\nconst isVanicAttr = (a) => a[0] === 'c' && a[1] === '-';\nfunction isNotMatch(node, dom) {\n  return (\n    node.nodeType !== dom.nodeType ||\n    node.tagName !== dom.tagName ||\n    node.id !== dom.id ||\n    node.src !== dom.src ||\n    getAttr(node, 'c-comp') !== getAttr(dom, 'c-comp')\n  );\n}\nfunction getAttr(node, attr) {\n  if (!node.getAttribute) return '';\n  return node.getAttribute(attr);\n}\nfunction getNodeContent(node, attr) {\n  if (attr) {\n    if (attr === 'href' || isVanicAttr(attr))\n      return getAttr(node, attr);\n    if (typeof node[attr] !== 'string') return getAttr(node, attr);\n    return node[attr];\n  }\n  if (node.childNodes && node.childNodes.length > 0) return null;\n  return node.textContent;\n}\nexport function diff(template, elem) {\n  const domNodes = Array.prototype.slice.call(elem.childNodes);\n  const templateNodes = Array.prototype.slice.call(template.childNodes);\n  let count = domNodes.length - templateNodes.length;\n  if (count > 0) {\n    for (; count > 0; count--) {\n      domNodes[domNodes.length - count].parentNode.removeChild(\n        domNodes[domNodes.length - count]\n      );\n    }\n  }\n  templateNodes.forEach(function (node, index) {\n    if (!domNodes[index]) {\n      elem.appendChild(node.cloneNode(true));\n      return;\n    }\n    if (node.attributes && node.attributes.length) {\n      let i = 0;\n      const len = node.attributes.length;\n      while (i < len) {\n        const attr = node.attributes[i];\n        if (attr.name) {\n          const tpl = getNodeContent(node, attr.name) || '';\n          const tplDom = getNodeContent(domNodes[index], attr.name) || '';\n          if (tpl !== tplDom) {\n            let nm = attr.name;\n            if (isVanicAttr(nm)) {\n              if (nm !== 'c-comp') {\n                if (domNodes[index].setAttribute) {\n                  domNodes[index].setAttribute(nm, tpl);\n                }\n              }\n            } else {\n              if (nm === 'class') nm = 'className';\n              else if (nm === 'for') nm = 'htmlFor';\n              domNodes[index][nm] = tpl;\n            }\n          }\n        }\n        i++;\n      }\n    }\n    if (isNotMatch(node, domNodes[index])) {\n      domNodes[index].parentNode.replaceChild(\n        node.cloneNode(true),\n        domNodes[index]\n      );\n      return;\n    }\n    const templateContent = getNodeContent(node);\n    if (\n      templateContent &&\n      templateContent !== getNodeContent(domNodes[index])\n    ) {\n      domNodes[index].textContent = templateContent;\n    }\n    if (domNodes[index].childNodes.length > 0 && node.childNodes.length < 1) {\n      domNodes[index].innerHTML = '';\n      return;\n    }\n    if (domNodes[index].childNodes.length < 1 && node.childNodes.length > 0) {\n      const fragment = document.createDocumentFragment();\n      diff(node, fragment);\n      domNodes[index].appendChild(fragment);\n      return;\n    }\n    if (node.childNodes.length > 0) {\n      diff(node, domNodes[index]);\n    }\n  });\n}\n","import { diff } from './diff.js';\n\nfunction filteredArray(arr1, arr2) {\n  const newArr = Object.assign([], arr1);\n  arr2.forEach((v) => {\n    let i = newArr.indexOf(v);\n    if (i >= 0) {\n      newArr.splice(i, 1);\n    }\n  });\n  return newArr;\n}\nconst regFindComp = /(?<=c-comp=\")(.*?)(?=\")/gm;\nlet reRender;\nlet reElem;\nlet fno = [];\nlet rep = {};\nlet primObject = {};\nlet idx = 0;\nlet hid = 0;\nlet curComp;\nlet lastRes;\nconst sto = setTimeout;\n\nfunction esc(unsafe) {\n  return String(unsafe)\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\nconst styleToString = (style) => {\n  return Object.keys(style).reduce(\n    (acc, key) =>\n      acc +\n      key\n        .split(/(?=[A-Z])/)\n        .join('-')\n        .toLowerCase() +\n      ':' +\n      style[key] +\n      ';',\n    ''\n  );\n};\n\nexport function _render(fn) {\n  const res = fn();\n  const elem = document.createElement('div');\n  elem.innerHTML = res;\n  diff(elem, reElem);\n  let i = fno.length;\n  while (i--) {\n    const obj = fno[i];\n    const value = obj.value;\n    const key = obj.key.toLowerCase();\n    if (key !== 'ref') {\n      const $ = reElem.querySelector(`[c-${key}=\"${i}\"]`);\n      if ($) {\n        if (typeof value === 'object') {\n          for (const s in value) $[key][s] = value[s];\n        } else {\n          $[key] = value;\n        }\n      }\n    }\n  }\n  idx = 0;\n  fno = [];\n  const arr = res.match(regFindComp) || [];\n  const initArr = lastRes ? lastRes.match(regFindComp) || [] : arr;\n  lastRes = res;\n  if (reRender && arr.length !== initArr.length) {\n    const effects = filteredArray(arr, initArr);\n    const cleanEffects = filteredArray(initArr, arr);\n    cleanEffects.forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) cleanEffect(cmp);\n    });\n    effects.forEach((k) => {\n      const cmp = primObject[k];\n      if (cmp) {\n        const { hook } = cmp;\n        hook.y.splice(0);\n        hook.e.splice(0);\n        if (hook.s.length)\n          sto(() => hook.s.forEach((effect) => invoveEffect(effect, true)));\n      }\n    });\n  }\n  reRender = fn;\n}\n\nexport function html(ret) {\n  const subs = [].slice.call(arguments, 1);\n  return ret.reduce((start, end, no) => {\n    let val = subs[no - 1];\n    if (val === null || val === undefined) val = '';\n    if (Array.isArray(val)) val = val.join('');\n    const type = typeof val;\n    if (type === 'function' || type === 'boolean' || type === 'object') {\n      const arr = start.match(/[^ ]+/g);\n      const value = val;\n      const key = (arr[arr.length - 1] || '').replace(/=|\"/g, '').toLowerCase();\n      if (!/<|>/.test(key)) {\n        const id = idx++;\n        const attr = `c-${key}=\"${id}`;\n        if (key === 'ref') {\n          val.ref = () => document.querySelector(`[${attr}\"]`);\n        }\n        fno[id] = { key, value };\n        if (type !== 'function') rep[`${attr}\"`] = { key, value };\n        start = arr.slice(0, -1).join(' ') + ` ${attr}`;\n      }\n      val = '';\n    }\n    return start + String(val) + end;\n  });\n}\n\nexport function renderToString(fn) {\n  return (typeof fn === 'string' ? fn : fn()).replace(/ c-.*=\"\\d+\"/g, (a) => {\n    const arr = (a || '').split(' ');\n    let str = '';\n    for (let i = 0; i < arr.length; i++) {\n      const ret = rep[arr[i]];\n      if (ret) {\n        const { key, value } = ret;\n        const type = typeof value;\n        if (type === 'object' && key !== 'ref') {\n          str += ` ${key}=\"${styleToString(value)}\"`;\n        }\n        if (value === true) str += ` ${key}`;\n      }\n    }\n    return str;\n  });\n}\n\nexport function render(fn, elem) {\n  reRender = undefined;\n  fno = [];\n  idx = 0;\n  reElem = elem;\n  _render(fn);\n}\nexport const comp = (fn) => {\n  const hook = (__C.hook = { i: 0, e: [], y: [], s: [] });\n  const id = hid++;\n  function __C(p) {\n    const prev = curComp;\n    curComp = __C;\n    hook.i = 0;\n    let res = fn(p === undefined ? {} : p);\n    if (typeof res === 'string') {\n      if (!/<.*>/.test(res)) res = `<notag>${res}</notag>`;\n      res = res.replace(/>/, ` c-comp=\"${id}\">`);\n      primObject[`${id}`] = curComp;\n    }\n    if (prev) curComp = prev;\n    if (reRender) {\n      if (hook.e.length) sto(() => hook.e.splice(0).forEach(invoveEffect));\n    } else {\n      if (hook.s.length)\n        sto(() => {\n          hook.e.splice(0);\n          hook.s.forEach(invoveEffect);\n        });\n    }\n    if (hook.y.length) hook.y.splice(0).forEach(invoveEffect);\n    return res;\n  }\n  return __C;\n};\n\n// useState\nexport function useState(value) {\n  const { s, i } = curComp.hook;\n  const state = s[i] === undefined ? value : s[i].state;\n  if (i >= s.length) s.push({ state });\n  curComp.hook.i++;\n  return [\n    state,\n    (newVal) => {\n      s[i].state = typeof newVal === 'function' ? newVal(state) : newVal;\n      _render(reRender);\n    },\n  ];\n}\n\nconst hasChange = (old, next) =>\n  !old || old.length !== next.length || next.some((dep, x) => dep !== old[x]);\n\nfunction runCleanup(effect) {\n  if (typeof effect.clean === 'function') effect.clean();\n}\n\nfunction invoveEffect(effect, i) {\n  if (typeof i !== 'boolean') {\n    runCleanup(effect);\n    effect.clean = undefined;\n  }\n  if (typeof effect.val === 'function') {\n    sto(() => (effect.clean = effect.val()));\n  }\n}\n\nconst cleanEffect = (c) => {\n  if (c.hook) sto(() => c.hook.s.forEach(runCleanup));\n};\n\nconst buildEffect = (status) => (val, deps) => {\n  if (!reElem) return;\n  const { i, s, e, y } = curComp.hook;\n  if (!deps) deps = s.map((el) => el.state).filter(Boolean);\n  const isOk = i >= s.length;\n  if (isOk) s[i] = { deps, val };\n  if (isOk || hasChange(s[i].deps, deps)) {\n    (status ? e : y).push(s[i]);\n  }\n  s[i].val = val;\n  s[i].deps = deps;\n  curComp.hook.i++;\n};\n\n// useEffect\nexport const useEffect = buildEffect(true);\n\n// useLayoutEffect\nexport const useLayoutEffect = buildEffect(false);\n\n// useReducer\nexport function useReducer(reducer, init, initLazy) {\n  const arr = useState(initLazy !== undefined ? initLazy(init) : init);\n  return [\n    arr[0],\n    (action) => {\n      arr[1](reducer(arr[0], action));\n    },\n  ];\n}\n\n// useMemo\nexport function useMemo(fn, deps) {\n  if (!reElem) return fn();\n  const { i, s } = curComp.hook;\n  if (!deps) deps = s.map((el) => el.state).filter(Boolean);\n  if (i >= s.length || hasChange(s[i].deps, deps)) {\n    s[i] = { val: fn(), deps };\n  }\n  curComp.hook.i++;\n  return s[i].val;\n}\n\n// useCallback\nexport const useCallback = (cb, deps) => useMemo(() => (p) => cb(p), deps);\n\n// useRef\nexport const useRef = (current) =>\n  useMemo(() => ({ current, ref: () => current }), []);\n\n// createContext\nexport const createContext = (init) => {\n  let value;\n  return {\n    Provider(newVal, fn) {\n      value = newVal || init;\n      return fn();\n    },\n    v: () => value,\n  };\n};\n\n// useContext\nexport const useContext = (c) => {\n  return c.v();\n};\n\n// CREDIT & ORIGINAL https://github.com/developit/vhtml\n// Add event, ref and style as object.\nconst dangerHTML = 'dangerouslySetInnerHTML';\nexport function h(tag, attr) {\n  const args = [].slice.call(arguments, 2);\n  const arr = [];\n  let str = '';\n  attr = attr || {};\n  for (let i = args.length; i--; ) {\n    arr.push(typeof args[i] === 'number' ? String(args[i]) : args[i]);\n  }\n  if (typeof tag === 'function') {\n    attr.children = arr.reverse();\n    return tag(attr);\n  }\n  if (tag) {\n    str += `<${tag}`;\n    if (attr) {\n      for (let k in attr) {\n        if (k !== 'children') {\n          let val = attr[k];\n          const type = typeof val;\n          if (type === 'function' || type === 'boolean' || type === 'object') {\n            const value = val;\n            const key = k.toLowerCase();\n            const id = idx++;\n            if (key === 'ref') {\n              val.ref = () => document.querySelector(`[c-${id}=\"${id}\"]`);\n            }\n            fno[id] = { key, value };\n            k = `c-${key}`;\n            val = id;\n            if (type !== 'function') rep[`${k}=\"${val}\"`] = { key, value };\n          }\n          if (\n            val !== undefined &&\n            val !== false &&\n            val !== null &&\n            k !== dangerHTML\n          ) {\n            str += ` ${k}=\"${esc(val)}\"`;\n          }\n        }\n      }\n    }\n    str += '>';\n  }\n  if (\n    [\n      'area',\n      'base',\n      'br',\n      'col',\n      'command',\n      'embed',\n      'hr',\n      'img',\n      'input',\n      'keygen',\n      'link',\n      'meta',\n      'param',\n      'source',\n      'track',\n      'wbr',\n    ].indexOf(tag) === -1\n  ) {\n    if (attr[dangerHTML]) {\n      str += attr[dangerHTML].__html;\n    } else {\n      for (let i = arr.length; i--; ) {\n        const child = Array.isArray(arr[i]) ? arr[i].join('') : arr[i];\n        if (typeof child === 'string') {\n          str += child[0] !== '<' ? esc(child) : child;\n        }\n      }\n    }\n    str += tag ? `</${tag}>` : '';\n  }\n  return str;\n}\n\nexport const Fragment = ({ children }) => html(null, null, children);\n"],"names":["isVanicAttr","a","getAttr","node","attr","getAttribute","getNodeContent","childNodes","length","textContent","diff","template","elem","domNodes","Array","prototype","slice","call","templateNodes","count","parentNode","removeChild","forEach","index","attributes","i","len","tpl","name","nm","setAttribute","dom","nodeType","tagName","id","src","replaceChild","cloneNode","templateContent","innerHTML","fragment","document","createDocumentFragment","appendChild","filteredArray","arr1","arr2","newArr","Object","assign","v","indexOf","splice","reRender","reElem","curComp","lastRes","regFindComp","fno","primObject","idx","hid","sto","setTimeout","_render","fn","res","createElement","obj","value","key","toLowerCase","$","querySelector","s","arr","match","initArr","effects","k","cmp","cleanEffect","hook","y","e","effect","invoveEffect","useState","state","push","newVal","hasChange","old","next","some","dep","x","runCleanup","clean","val","c","status","buildEffect","deps","isOk","map","el","filter","Boolean","useEffect","useLayoutEffect","useMemo","__C","p","prev","test","concat","replace","init","Provider","ret","subs","arguments","reduce","start","end","no","type","isArray","join","ref","String","undefined","cb","reducer","initLazy","action","current"],"mappings":"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"}